
<!DOCTYPE html>
<html lang="zh">
<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<meta name="apple-touch-fullscreen" content="yes">
<meta name=”apple-mobile-web-app-capable” content=”yes” />
<meta name="keywords" content="Q-Note,Quick Note">
<meta name="description" content="Q-Note">
<title>Q-Note</title>
<link rel="shortcut icon" href="public/images/favicon3.ico" type="image/x-icon" />


<!--    global values-->
<script>
    // 不需要同步的数据
   // var baseUrl = "http:\/\/cs-linux.nottingham.edu.cn:8000\/";
    var baseUrl = "http:\/\/115.28.134.156:3000\/";
    var LEA = {};
    LEA.locale = "en";
    var GlobalConfigs = {"uploadAttachSize":0,"uploadAvatarSize":0,"uploadBlogLogoSize":0,"uploadImageSize":0};
    var curNoteId = "";
    var curNotebookId = "";
    var curSharedNoteNotebookId = "";
    var curSharedUserId = "";
    var noteContentJson = [];

    //需要同步的初始数据
    var UserInfo = {"UserId":"","Email":"me@nottingham.edu.cn","Verified":false,"Username":"unknown","UsernameRaw":"","CreatedTime":"0001-01-01T00:00:00Z","Logo":"public/images/blog/Avatar.png","Theme":"","NotebookWidth":0,"NoteListWidth":0,"MdEditorWidth":0,"LeftIsMin":false,"ThirdUserId":"","ThirdUsername":"","ThirdType":0,"FromUserId":"","NoteCnt":0,"Usn":10,"FullSyncBefore":"0001-01-01T00:00:00Z","BlogUrl":"","PostUrl":"", "Password":"unknown"};

    var notebooks = [{"NotebookId":"0","UserId":"56a82c7bab64417776002a5c","Title":"Newest","UrlTitle":"","NumberNotes":1,"CreatedTime":"0001-01-01T00:00:00Z", "drop":!1, "drag":!1},
//    {"NotebookId":"56a82c7bab64417776002a5d","UserId":"unknown","ParentNotebookId":"","Seq":-1,"Title":"life","UrlTitle":"","NumberNotes":0,"IsTrash":false,"IsBlog":false,"CreatedTime":"0001-01-01T00:00:00Z","UpdatedTime":"0001-01-01T00:00:00Z","Usn":0,"IsDeleted":false,"Subs":[]},        
//     {"NotebookId":"56a82c7bab64417776002a5e","UserId":"unknown","ParentNotebookId":"","Seq":-1,"Title":"study","UrlTitle":"","NumberNotes":0,"IsTrash":false,"IsBlog":false,"CreatedTime":"0001-01-01T00:00:00Z","UpdatedTime":"0001-01-01T00:00:00Z","Usn":0,"IsDeleted":false,"Subs":[]},
//
    {"NotebookId":"56a82c7bab64417776002a5f","UserId":"GRPDT","ParentNotebookId":"","Seq":-1,"Title":"Welcome","UrlTitle":"","NumberNotes":1,"IsTrash":false,"IsBlog":false,"CreatedTime":"0001-01-01T00:00:00Z","UpdatedTime":"0001-01-01T00:00:00Z","Usn":0,"IsDeleted":false,"Subs":[]},

    {"NotebookId":"-1","UserId":"56a82c7bab64417776002a5c","Title":"Trash","UrlTitle":"","NumberNotes":0,"CreatedTime":"0001-01-01T00:00:00Z","drop":!1, "drag":!1}];

//    var shareNotebooks = {"52d26b4e99c37b609a000001":[{"ParentNotebookId":"","Title":"Welcome","UrlTitle":"","NumberNotes":0,"IsTrash":false,"IsBlog":false,"UpdatedTime":"0001-01-01T00:00:00Z","Usn":0,"IsDeleted":false,"ShareNotebookId":"56a82c7b0431099237ea62bd","ToUserId":"56a82c7bab64417776002a5c","ToGroupId":"","ToGroup":{"GroupId":"","UserId":"","Title":"","UserCount":0,"CreatedTime":"0001-01-01T00:00:00Z","Users":null},"Perm":1,"Subs":null,"Seq":0,"NotebookId":"52d270c7bcbf214cfa000000","IsDefault":false},
//    ]};
    
    var sharedUserInfos = [{"UserId":"57178cd5d922a859a7000000","Email":"QuickNote","Verified":true,"Username":"QuickNote","UsernameRaw":"ownertinymce","CreatedTime":"2014-01-14T21:20:39.225+08:00","Logo":"","Theme":"default","NotebookWidth":201,"NoteListWidth":241,"MdEditorWidth":477,"LeftIsMin":false,"ThirdUserId":"","ThirdUsername":"","ThirdType":0,"FromUserId":"","NoteCnt": 5,"Usn":203042,"FullSyncBefore":"0001-01-01T00:00:00Z"}];

    var shareNotebooks = {"57178cd5d922a859a7000000":[{"ParentNotebookId":"","Title":"User Guide","UrlTitle":"","NumberNotes":5,"IsTrash":false,"IsBlog":false,"UpdatedTime":"0001-01-01T00:00:00Z","Usn":0,"IsDeleted":false,"ShareNotebookId":"5715d63ac1f4d07f58000000","ToUserId":"56a82c7bab64417776002a5c","ToGroupId":"","ToGroup":{"GroupId":"","UserId":"","Title":"","UserCount":0,"CreatedTime":"0001-01-01T00:00:00Z","Users":null},"Perm":1,"Subs":null,"Seq":0,"NotebookId":"5715d63ac1f4d07f58000000", "IsDefault":false}
    ]};

//    var shareNotebooks = {};
    
//    var sharedUserInfos = [{"UserId":"56fb70aed922a81ac2000000","Email":"qy","Verified":true,"Username":"qy","UsernameRaw":"qy","CreatedTime":"2014-01-14T21:20:39.225+08:00","Logo":"public/upload/520/52d26b4e99c37b609a000001/images/logo/3fa3ca0e0a431b81ede3351cd091f17d.jpg","Theme":"default","NotebookWidth":201,"NoteListWidth":241,"MdEditorWidth":477,"LeftIsMin":false,"ThirdUserId":"","ThirdUsername":"","ThirdType":0,"FromUserId":"","NoteCnt":276,"Usn":203042,"FullSyncBefore":"0001-01-01T00:00:00Z"}];
    
//    var sharedUserInfos = [];
    
    var shareNotebookDefault = {};


    var notes = [
    {"NoteId":"56a831ae03f3314265000003","UserId":"unknown","CreatedUserId":"GRPDT","NotebookId":"56a82c7bab64417776002a5f","Title":"Welcome","Desc":"Welcome","ImgSrc":"","Tags":[""],"IsTrash":false,"IsBlog":false,"UrlTitle":"2d7a82199fb9","IsRecommend":false,"IsTop":false,"HasSelfDefined":false,"ReadNum":0,"LikeNum":0,"CommentNum":0,"IsMarkdown":false,"AttachNum":0,"CreatedTime":"2016-01-27T10:55:38.656+08:00","UpdatedTime":"2016-01-27T17:40:20.762+08:00","RecommendTime":"0001-01-01T00:00:00Z","PublicTime":"2016-01-27T10:55:38.656+08:00","UpdatedUserId":"56a82c7bab64417776002a5c","Usn":10,"IsDeleted":false, "Content":"Welcome to QuickWrite"}
    ];

    var latestNotes = [
    // {"NoteId":"56a831ae03f3314265000003","UserId":"unknown","CreatedUserId":"GRPDT","NotebookId":"56a82c7bab64417776002a5f","Title":"Welcome","Desc":"Welcome","ImgSrc":"","Tags":[""],"IsTrash":false,"IsBlog":false,"UrlTitle":"2d7a82199fb9","IsRecommend":false,"IsTop":false,"HasSelfDefined":false,"ReadNum":0,"LikeNum":0,"CommentNum":0,"IsMarkdown":false,"AttachNum":0,"CreatedTime":"2016-01-27T10:55:38.656+08:00","UpdatedTime":"2016-01-27T17:40:20.762+08:00","RecommendTime":"0001-01-01T00:00:00Z","PublicTime":"2016-01-27T10:55:38.656+08:00","UpdatedUserId":"56a82c7bab64417776002a5c","Usn":10,"IsDeleted":false, "Content":"Welcome to QuickWrite"}
    ];
//        {"NoteId":"56a831ae03f3314265000003","UserId":"unknown","CreatedUserId":"","NotebookId":"56a82c7bab64417776002a5f","Title":"Default note","Desc":"Default note","ImgSrc":"","Tags":[""],"IsTrash":false,"IsBlog":false,"UrlTitle":"2d7a82199fb9","IsRecommend":false,"IsTop":false,"HasSelfDefined":false,"ReadNum":0,"LikeNum":0,"CommentNum":0,"IsMarkdown":false,"AttachNum":0,"CreatedTime":"2016-01-27T10:55:38.656+08:00","UpdatedTime":"2016-01-27T17:40:20.762+08:00","RecommendTime":"0001-01-01T00:00:00Z","PublicTime":"2016-01-27T10:55:38.656+08:00","UpdatedUserId":"56a82c7bab64417776002a5c","Usn":10,"IsDeleted":false, "Content":"9"}

    var tagsJson = [];
//    var tagsJson = [{"TagId":"56e22e02ab64415add000da6","UserId":"unknown","Tag":"test","Usn":90,"Count":1,"CreatedTime":"2016-03-11T10:31:30.348+08:00","UpdatedTime":"2016-03-11T10:31:30.348+08:00","IsDeleted":false},{"TagId":"56d13aabab64417fb100002d","UserId":"unknown","Tag":"welcome","Usn":41,"Count":1,"CreatedTime":"2016-02-27T13:56:59.078+08:00","UpdatedTime":"2016-02-27T13:56:59.078+08:00","IsDeleted":false}];

    var trackingLog = [];
    var allAppData = {};
    
    //initial data    
    allAppData.UserInfo = UserInfo;
    allAppData.notebooks = notebooks;
    allAppData.shareNotebooks = shareNotebooks;
    allAppData.sharedUserInfos = sharedUserInfos;
    allAppData.notes = notes;
    allAppData.latestNotes = latestNotes;
    allAppData.tagsJson = tagsJson;
    allAppData.trackingLog = trackingLog;
    allAppData.shareNotebookDefault = shareNotebookDefault;

</script>   
    
<!--Google custome search engine-->
<script>
  (function() {
    var cx = '002556101758618985822:mbg5wo_jkvg';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>

<link rel="stylesheet" href="public/css/theme/default.css" type="text/css" id="themeLink"/>
    
<script src="public/js/dep.min.js"></script>
<!--定制版的JQuery；需要放在bootstrap之前-->
    
<link href="public/css/bootstrap-min.css" rel="stylesheet" />
<!--    responsible for part of basic style(bootstrap)-->

<!--<link rel="stylesheet" href="public/css/tinymce/skin.min.css" rel="stylesheet"/> // style sheet for tinymce-->

<link href="public/css/font-awesome-4.2.0/css/font-awesome-min.css" rel="stylesheet" />
<!--    responsible for icons-->

<link href="public/css/zTreeStyle/zTreeStyle-min.css" rel="stylesheet" />
<!--    use part of open source: zTreeStyle-->

<link href="public/css/DND.css" rel="stylesheet" />
<!--    responsible for darg-and-drop part-->

<!--<link href="public/md/themes/default-min.css?t=h" rel="stylesheet" /> // related to markdown to-do list-->

<link rel="stylesheet" href="public/js/contextmenu/css/contextmenu-min.css?id=1" type="text/css" />
<!--    选项按钮-->
    
<!--    load data -->
<script src="public/data/localForage-1.4.0/dist/localforage.js"></script>
<!--<script src="public/data/alldata.js"></script>-->
<!--<script src="public/data/alldata4.js"></script>-->

<link href="public/js/videoRecorder/css/video-js.css" rel="stylesheet">
<link href="public/js/videoRecorder/css/videojs.record.css" rel="stylesheet">
<link href="public/js/videoRecorder/css/style.css" rel="stylesheet">

<script src="public/js/videoRecorder/js/video.min.js"></script>
<script src="public/js/videoRecorder/js/RecordRTC.js"></script>

<script src="public/js/videoRecorder/js/videojs.record.js"></script>
<script src="public/js/videoRecorder/js/FileSaver.js"></script> 
<script src="https://cdn.rawgit.com/eligrey/Blob.js/master/Blob.js"></script>

<style>
/* change player background color */
#myVideo {
  background-color: #47AFD1;
}
</style>


<script>
    // dynamic style sheets
    var hash = location.hash;
    if(hash.indexOf("writing") >= 0) {
        var files = '<link rel="stylesheet" href="public/css/theme/writting-overwrite.css?t=b" type="text/css" id="themeLink" />'; // unknown usage
    } else {
        var files ='<link rel="stylesheet" href="public/css/theme/default.css?t=d" type="text/css" id="themeLink" />'; // the most important basic style
    }
    document.write(files);
</script>

<script>
    function log(o) {

    }
</script>

<script>
	var array= new Array();
	var countweb;
	var current;
</script>

<script>
function webaddress(){
	//var x =document.getElementById("address");
	var http = document.getElementById("address").value;
	document.getElementById("webpage").src = document.getElementById("address").value;
	array.push(http);
	current = array.length;
	countweb=current-1;
}

function backpage(){
	if(countweb>0){
		document.getElementById("address").value = array[countweb-1]
		document.getElementById("webpage").src = array[countweb-1];
		countweb--;
	}
}

function forwardpage(){
	if(countweb<current-1){
				document.getElementById("address").value = array[countweb+1]
		document.getElementById("webpage").src = array[countweb+1];
		countweb++;
	}
}
</script>
</head>
<body>
	<div id="page">
		<div id="pageInner">


			<div id="header">

				<div id="logo" class="pull-left">
					<img src="public/images/logo/quickwrite.png" height=50>
				</div>

				<div id="switcher" class="pull-left">
					 <i class="fa fa-align-justify" id="leftSwitcher" title="Hide sidebar"></i>
					 <span id="leftSwitcher2" title="Show sidebar"><img src="public/images/logo/quickwrite10.png" height=25></span>
				</div>

<!--
				<div class="pull-left" id="searchWrap">
					<form class="navbar-form form-inline col-lg-2" id="searchNote">
						<input class="form-control" placeholder="Search Note" type="text" id="searchNoteInput">
					</form>
				</div>
-->

				<div class="pull-left" style="" id="newNoteWrap">

					<div id="newMyNote">
						<a class="new-note" id="newNoteBtn" title="New note">

							<span class="new-note-text">New note</span>
							<span class="new-note-text-abbr">New</span>
						</a>
						
						<span class="new-split">|</span>
						&nbsp &nbsp
<!--
						<a class="new-note new-markdown" id="newNoteMarkdownBtn" title="New markdown note">

							<span class="new-markdown-text">New markdown note</span>
							<span class="new-markdown-text-abbr">Md</span>
						</a>
-->

						<span class="for-split"> - </span>

<!--                        为了方便获取当前notebookId：用于创建新note-->
						<span id="curNotebookForNewNote" notebookId=""></span>

					</div>


					<div id="newSharedNote" style="display: none">
						<a id="newSharedNoteBtn" class="new-note">

							<span class="new-note-text">New note</span>
							<span class="new-note-text-abbr">New</span>
						</a>
						<span class="new-split">|</span>
						<!-- <a id="newShareNoteMarkdownBtn" class="new-note new-markdown" title="New markdown note"> -->
							<!-- <span class="new-markdown-text">New markdown note</span> -->
							<!-- <span class="new-markdown-text-abbr">Md</span> -->
						<!-- </a> -->
						<span class="for-split"> - </span>
						<span id="curNotebookForNewSharedNote" notebookId="" userId=""></span>

					</div>
				</div>

				<div class="pull-left" id="leanoteMsg">
					<span id="msg" style="display: inline-block;"></span>
					<span id="loading">
					</span>
				</div>

				<div class="pull-right" style="margin: 0 10px" id="myProfile">
					<div class="dropdown">
						<a class="dropdown-toggle" title="<semail" data-toggle="dropdown" style="line-height: 60px;">
							<img alt="" title="" src="public/images/supermario.jpg" id="myAvatar"/>
							<span class="username" id="username"> 
<!--								pan.atopos@outlook.com-->
							</span>
							<i class="fa fa-angle-down"></i>
						</a>
						<ul class="dropdown-menu li-a" role="menu">
							<li role="presentation" class="divider"></li>
							<li role="presentation" onclick="logout()">
								<i class="fa fa-sign-out"></i>
								Logout
							</li>
						</ul>
					</div>
				</div>

<!--                go to the feedback questionaire-->
				<div class="pull-right top-nav writting-hide lea-blog">
					<a target="_blank" href="http://www.sojump.com/jq/7951507.aspx">
						<!-- Q-Note Home -->
						Give us feedback
					</a>
				</div>
<!--
				<div class="pull-right top-nav writting-hide" id="myBlog">
					<a target="_blank" href="">
						Blog
					</a>
				</div>
-->
<!--                切换模式的button-->
<!--
				<div class="pull-right toggle-editor-mode top-nav" id="toggleEditorMode">
					<a href="#writing"><span>Writing Mode</span></a>
				</div>
-->

				<div class="pull-right top-nav" id="downloadTracking">
					<!-- <a onclick="downloadTrakcingLog()"><span>Download tracking log</span></a> -->
					<i id = "synBtn" class = "fa fa-synchronization" title = "synchronization"></i>
					&nbsp
					<i class = "fa fa-downloadTracking" title = "Download tracking log" onclick = "downloadTrakcingLog()"></i>
				</div>

				<div style="clear: both"></div>
			</div>

			<div id="mainContainer" class="clearfix">
				<div id="mainMask">
					<img src="public\images\loading-30.gif" />
					<br />
					<br />
					loading...
				</div>

				<div id="leftNotebook">
					<div id="notebook">
						<div class="folderNote opened" id="myNotebooks">
							<div class="folderHeader clearfix">
								<i class="fa fa-book pull-left fa-left"></i>
								<span class="pull-left">
									Notebook
								</span>
								<div class="pull-right" id="addNotebookPlus" title="Add notebook">
									<i class="fa  fa-plus" title="Add notebook"></i>
								</div>
							</div>

							<div class="folderBody">
								<input type="text" class="form-control" id="searchNotebookForList" placeholder="Search Notebook"/>
								<ul class="ztree" id="notebookList"></ul>
								<ul class="ztree" id="notebookListForSearch"></ul>
							</div>
						</div>

						<div class="folderNote closed" id="myTag">
							<div class="folderHeader">
								<i class="fa fa-bookmark fa-left"></i>
								<span>
									Tag
								</span>
							</div>

							<ul class="folderBody clearfix" id="tagNav">
								<li data-tag="red"><a> <span class="label label-red">red</span></a></li>
								<li data-tag="blue"><a> <span class="label label-blue">blue</span></a></li>
								<li data-tag="yellow"><a> <span class="label label-yellow">yellow</span></a></li>
								<li data-tag="green"><a> <span class="label label-green">green</span></a></li>
							</ul>
						</div>

						<div class="folderNote closed" id="myShareNotebooks">
							<div class="folderHeader">
								<i class="fa fa-user fa-left"></i>
								<span>
									Share
								</span>
							</div>

							<ul class="folderBody" id="shareNotebooks">

							</ul>
						</div>

					</div>


					<div id="notebookMin">

						<div target="#notebookList" title="Notebook" class="minContainer">
							<i class="fa fa-book"></i>
							<ul class="dropdown-menu" id="minNotebookList">
							</ul>
						</div>
						<div target="#tagNav" title="My tag" class="minContainer">
							<i class="fa fa-bookmark"></i>
							<ul class="dropdown-menu" id="minTagNav">
							</ul>
						</div>
						<div id="minShareNotebooks">
							<div class="minContainer" target="#friendContainer0" title="Share">
								<i class="fa fa-user"></i>
							</div>
						</div>
					</div>


				</div>

<!--                左一split-->
				<div class="noteSplit" id="notebookSplitter"></div>

<!--                笔记list+笔记部分-->
				<div id="noteAndEditor">
					<div id="noteAndEditorMask">
						<img src="public\images\loading-24.gif"/>
						<br />
						loading...
					</div>
						<div id="noteList">            
                                <div id="noteItemListWrap" >
<!--									<div class="scrolls">-->
                                    <ul id="noteItemList" style = "overflow: auto; width: 100%;" >
									</ul>
<!--                                    </div>-->
								</div>
						</div>

                        <div id="editorMask">  
                            There is no notebook now. Let us make one :)
                            <br />
                            <br />
                            <div id="editorMaskBtns">
                                <a class="note">New note</a>
<!--                                <a class="markdown">New Markdown Note</a>-->
                            </div>
                            <div id="editorMaskBtnsEmpty">
                                Sorry, please choose a notebook at first :)
                            </div>
                        </div>
						
                        <div id="batchMask" class="note-mask">  
                            <div class="batch-ctn" id="batchCtn"></div>
                            <div class="batch-info">
                                <span></span> notes selected
                                <p><i class="fa fa-cog"></i></p>
                            </div>
                        </div>

                        <!-- <div id="noteTop"> -->
                            <div id="tool" class="clearfix">
                                <div class="pull-left" id="tag">
                                    <div id="tags" style="display: inline-block; line-height: 25px;">
                                    </div>
                                    <div class="dropdown" style="display: inline-block"
                                        id="tagDropdown">
                                        <i class="fa fa-bookmark-o"></i> 
                                        <a
                                            class="metro-a dropdown-toggle" data-toggle="dropdown"
                                            id="addTagTrigger" style="cursor: text; padding-left: 0">
                                            <span class="add-tag-text">
                                            Click to add Tag
                                            </span>
                                        </a> 
                                        <input type="text" id="addTagInput" />
                                        <ul class="dropdown-menu" role="menu" id="tagColor">
                                            <li role="presentation"><span class="label label-red">red</span>
                                            </li>
                                            <li role="presentation"><span class="label label-blue">blue</span>
                                            </li>
                                            <li role="presentation"><span class="label label-yellow">yellow</span></li>
                                            <li role="presentation"><span class="label label-green">green</span></li>
                                        </ul>
                                    </div>
                                </div>

                                <ul class="pull-right" id="editorTool">
                                    <li><a class="ios7-a " id="addBtn"
                                        data-toggle="dropdown" title="Add a new paragraph">
                                        <span class="fa fa-plus"></span></a></li>
                                    
<!--
                                    <li><a class="ios7-a " id="editBtn"
                                        data-toggle="dropdown" title="ctrl/cmd+e Toggle Modify with Readonly">
                                        <span class="fa"></span></a></li>
-->
                                    
                                    <li><a class="ios7-a " id="saveBtn"
                                        data-toggle="dropdown" title="Save locally">
                                        <span class="fa fa-save"></span></a></li>
                                    
<!--
                                    <li class="dropdown" id="noteInfoDropdown">
                                        <a class="ios7-a dropdown-toggle" data-toggle="dropdown" title="Information">
                                            <span class="fa fa-info"></span>
                                        </a>
                                        <div class="dropdown-menu" id="noteInfo"></div>
                                    </li>
-->
                                    
<!--
                                    <li class="dropdown" id="attachDropdown">
                                        <a class="ios7-a dropdown-toggle" data-toggle="dropdown" id="showAttach" title="Attachments">
                                            <span class="fa fa-paperclip"></span>
                                            <span id="attachNum"></span>
                                        </a>
                                        <div class="dropdown-menu" id="attachMenu">
                                            <ul id="attachList">
                                            </ul>
                                            <form id="uploadAttach" method="post" action="/attach/UploadAttach" enctype="multipart/form-data">
                                                <div id="dropAttach" class="dropzone">
                                                    <a class="btn btn-success btn-choose-file">
                                                        <i class="fa fa-upload"></i>
                                                        <span>Choose File</span>
                                                    </a>
                                                    <a class="btn btn-default" id="downloadAllBtn">
                                                        <i class="fa fa-download"></i>
                                                        <span>Download All</span>
                                                    </a>

                                                    <input type="file" name="file" multiple/>
                                                </div>
                                                <div id="attachUploadMsg">
                                                </div>
                                            </form>
                                        </div>
                                    </li>
-->

<!--
                                    <li><a class="ios7-a " id="contentHistory"
                                        data-toggle="dropdown" title="Histories">
                                        <span class="fa fa-history"></span></a></li>
-->
<!--
                                    <li><a class="ios7-a " id="tipsBtn"
                                        data-toggle="dropdown" title="Tips">
                                        <span class="fa fa-question"></span></a></li>
-->
                                </ul>
                            </div>
                            <div id="noteTitleDiv">
                                <input name="noteTitle" id="noteTitle" value="" placeholder="UnTitled" tabindex="1" />
                            </div>


                            <div id="noteReadTop">
                                <h2 id="noteReadTitle"></h2>
                                <div class="clearfix" id="noteReadInfo">
                                    <i class="fa fa-bookmark-o"></i>
                                    <span id="noteReadTags"></span>


                                    <i class="fa fa-clock-o"></i> Update 
                                    <span id="noteReadUpdatedTime"></span>  


                                    <i class="fa fa-clock-o"></i> Create 
                                    <span id="noteReadCreatedTime"></span>
                                </div>
                            </div>
                        <!-- </div> -->
                        
<!--                        editor !!!! ! ! ! ! !-->
                        <div id="editor"> 
<!--                    删除class="read-only"-->
<!--                            <h1>A</h1>-->
<!--                            <div draggable="true">B</div>-->
<!--                            <div draggable="true">C</div>-->
                        </div>
					<!-- </div> -->
				</div>
                <div class="noteSplit" id="mediaSplitter"></div>

                <div id="media">

                    <ul id="myTab" class="nav nav-tabs">
                       <li class="active">
                          <a href="#audioRecording" data-toggle="tab" title="Audio Recording">
                             <big><big><i class="fa fa-microphone"></i></big></big>
                          </a>
                       </li>
                       <li><a href="#videoRecording" data-toggle="tab" title="Video Recording">
                              <big><big><i class="fa fa-video-camera"></i></big></big>
                           </a>
                        </li>
<!--                        <li><a href="#files" data-toggle="tab" title="Open Files"onclick="TrackLogRecord.newCheckFileRecord()"> -->
                       <li><a href="#files" data-toggle="tab" title="Open Files">
                              <big><big><i class="fa fa-folder"></i></big></big>
                           </a>
                        </li>
                        <li><a id ="webicon" href="#webBrowser" data-toggle="tab" title="Web Browser">
                              <big><big><i class="fa fa-globe"></i></big></big>
                           </a>
                        </li>
                        <li><a href="#searchEngine" data-toggle="tab" title="Google Search">
                              <big><big><i class="fa fa-google"></i></big></big>
                           </a>
                        </li>
                        
                    </ul>
                    <div id="myTabContent" class="tab-content">
                       <div class="tab-pane fade in active" id="audioRecording">
							<!-- <p>Audio Recording</p> -->
					        <div id = "test" style="visibility:hidden;">
							<audio controls="controls"></audio>
							</div>

							<input onclick="startRecording()" type="image" class="audio-buttons" src="public\images\buttons\record.png" height=60 alt="Record" title="Record"/>
							&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
							<input onclick="stopRecording()" type="image" class="audio-buttons" src="public\images\buttons\stop.png" height=60 alt="Stop" title="Stop"/>
							&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
							<input onclick="download()" type="image" class="audio-buttons" src="public\images\buttons\download.png" height=60 alt="Download" title="Download"/>
							&nbsp &nbsp &nbsp &nbsp &nbsp &nbsp 
							<input onclick="clearRecord()" type="image" class="audio-buttons" src="public\images\buttons\clear.png" height=60 alt="Clear" title="Clear"/><br/>

							<b id="count"></b> <br/><br/><br/><br/><br/><br/><br/>

							<div id = audioDoc>
							<h1>Audio Recording</h1>
							<h4>1. Start recording </h4>
							<h4>2. Stop recording </h4>
							<h4>3. Then you can download it or clear it ^ ^ </h4>
							</div>


                       </div>
                       <div class="tab-pane fade" id="videoRecording">
                          <!-- <p>Video Recording</p>  --><br/>
                          <video id="myVideo" class="video-js vjs-default-skin"></video>
                          <button id="downloadbtn" onclick = "downloadvideo()">DOWNLOAD</button><br/><br/><br/><br/>
<!--                           <i id="videodownload" class = "fa fa-downloadbtn"></i>-->
                          <div id = audioDoc>
							<h1>Video Recording</h1>
							<h4>1. Click "camera" to open your camera </h4>
							<h4>2. Start recording </h4>
							<h4>3. Stop recording </h4>
							<h4>4. Then you can download it or record again</h4>
							<p>P.S. You will download 2 files once. One for video and another for audio.</p>
							</div>

                       </div>

                       <div class="tab-pane fade" id="files">
                          <form id="form1" runat="server">

                          <input type='file' id="imgInp" class="browseFile" title="Choose a file" width=400px onChange="TrackLogRecord.newOpenFileRecord()"/>
                          <div id="file-caption">Click on the button to display a file</div>
                          <iframe id="displayedFile" class="display" name="awindow" frameborder=1 src="" height=600px></iframe>
                        </form>
                       </div>
                        
                       <div class="tab-pane fade" id="webBrowser">
                       	   <i class="fa fa-webback" onclick="backpage()"></i>
                       	   <i class="fa fa-webforward" onclick="forwardpage()"></i>
                           <input id="address" type="text" placeholder="Enter address..." size="22" onkeydown="if(event.keyCode==13) {webaddress();return false;}"/>
                           <button id="addressbtn" onclick="webaddress()">Search</button>
                           <iframe id="webpage" name = "viewframe" src="http://baidu.com" width=100% height=900 onchange="" nwdisable nwfaketop></iframe>
                              <!-- <iframe id="webpage" class="display" src="http://baidu.com"></iframe> -->
                       </div>
                       <div class="tab-pane fade" id="searchEngine" overflow="auto">
                           <gcse:search></gcse:search> 
                           
<!--
                        <div class="top-search">
                            <form method="get" id="searchform" id="searchbox_002556101758618985822:mbg5wo_jkvg" action="search-result.html">
                                <div>
                                    <input value="002556101758618985822:mbg5wo_jkvg" name="cx" type="hidden"/>
                                    <input value="FORID:11" name="cof" type="hidden"/>
                                    <input type="text" value="Search..." name="s" id="s" onfocus="defaultInput(this)" onblur="clearInput(this)" />
                                    <input type="submit" id="searchsubmit" value=" " />
                                </div>
                            </form>
                        </div>
-->


                           
                           <div id = gscDoc>
                            <br><br><br><br><br><br>
							<h1>Search</h1>
							<h4>This is a google custom search engine.<br> You can use it as Google.<br> Of course, you need VPN.</h4>
                               <br><br>
							<h1>Add Content</h1>
							<h4>Drag the best elements into your note<br> and add your own content.</h4>
							
							</div>




                       </div>
                    </div>
                </div>
			</div>

			<div class="modal fade modal-insert-image">
			    <div class="modal-dialog"  style="width: 840px;max-width:100%;">
			        <div class="modal-content">
			            <div class="modal-header">
			                <button type="button" class="close" data-dismiss="modal"
			                    aria-hidden="true">&times;</button>
			                <h4 class="modal-title">Image</h4>
			            </div>
			            <div class="modal-body" style="padding-top: 0; padding-bottom: 0">
			            	<iframe name="mdImageManager" style="width: 100%; height: 350px" scrolling="no" id="leauiIfrForMD" src="" frameborder="0"></iframe>
			            </div>
			            <div class="modal-footer">
			                 <a href="#" class="btn btn-default"
			                    data-dismiss="modal">Cancel</a> <a href="#"
			                    class="btn btn-primary action-insert-image" data-dismiss="modal">Insert Image</a>
			            </div>
			        </div>
			    </div>
			</div>


			<div class="modal fade bs-modal-sm" id="editorDialog" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
				<div class="modal-dialog modal-sm">
				    <div class="modal-content">

				      <div class="modal-header">
				        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				        <h4 class="modal-title" id="editorDialog-title"></h4>
				      </div>
				      <div class="modal-body">
							<p></p>
							<div class="input-group">
							  <span class="input-group-addon">
							  	<i></i>
							  </span>
							  <input type="text" class="form-control" placeholder="">
							</div>
				      </div>

				      <div class="modal-footer">
				        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
				        <button type="button" class="btn btn-primary" id="editorDialog-confirm">Confirm</button>
				      </div>

				    </div>
				  </div>
			</div>			
<!--            share开始-->
            <div class="modal fade bs-modal-sm in" id="leanoteDialogRemote" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true" style="display: none;">  
                <div class="modal-dialog modal-sm">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                            <h4 class="modal-title" id="modalTitle">Share your notes or notebooks</h4>
                        </div>


                        <div class="modal-body">
<!--
                            <ul id="myTab" class="nav nav-tabs">
                                <li class="active"><a href="#baseInfo" data-toggle="tab">Share to friends</a></li>
                                <li class=""><a href="#groupInfo" data-toggle="tab">Share to group</a></li>

                                <li class=""><a href="#shareInfo" data-toggle="tab">Share by password</a></li>
                            </ul>
-->

                            <div class="tab-content">
                                <div class="tab-pane active" id="baseInfo">
                                    <button class="btn btn-primary" id="addShareNotebookBtn">Add Friend</button>
                                        <div id="shareMsg" class="alert alert-danger" style="display: none; margin: 5px 0 0 0;"></div>
                                        <table class="table table-hover" id="shareNotebookTable">
                                            <thead>
                                              <tr>
                                                <th>#</th>
                                                <th>Friend email</th>
<!--                                                <th>Permission</th>-->
                                                <th width="150px">Delete</th>
                                              </tr>
                                            </thead>
                                            <tbody>
                                            <tr id="tr1">
                                                <td>#</td>
                                                <td>
                                                    <input id="friendsEmail" type="text" class="form-control" placeholder="Friend email">
                                                </td>
<!--
                                                <td>
                                                    <label for="readPerm1"><input type="radio" name="perm1" checked="checked" value="0" id="readPerm1"> Read only</label> 
                                                    <label for="writePerm1"><input type="radio" name="perm1" value="1" id="writePerm1"> Writable</label>
                                                </td>
-->
                                                <td>
                                                    <button class="btn btn-success" data-loading-text="..." onclick="addShareNoteOrNotebook(1)">Share</button>
                                                    <button class="btn btn-warning" onclick="deleteShareNoteOrNotebook(1)">Delete</button>
                                                </td>
                                            </tr>

                                            </tbody>
                                        </table> 
                                </div>
<!--
                                <div class="tab-pane" id="groupInfo">
                                    <p>
                                    If you share your note to group, the member belongs to group will have the right to access the note.
                                    <a href="/member/group/index" target="_blank">Manage group/member</a>
                                    </p>

                                    <table class="table table-hover">
                                        <thead>
                                          <tr>
                                            <th>Group Name</th>
                                            <th>Permission</th>
                                            <th width="150px">Operation</th>
                                          </tr>
                                        </thead>
                                        <tbody>

                                    </tbody></table>
                                </div>
-->

<!--
                                <div class="tab-pane" id="shareInfo">
                                    <p>
                                        <button class="btn btn-primary" id="genShareLink">Get link and password</button>
                                        <button class="btn btn-danger" id="disableShare" disabled="disabled">Cancel</button>
                                    </p>

                                    <form class="form-horizontal">
                                      <div class="form-group">
                                        <label for="shareLink" class="col-sm-2 control-label">Share link</label>
                                        <div class="col-sm-10">
                                          <input type="text" class="form-control" id="shareLink">
                                        </div>
                                      </div>
                                      <div class="form-group">
                                        <label for="sharePass" class="col-sm-2 control-label">Access password</label>
                                        <div class="col-sm-10">
                                            <input type="text" class="form-control" id="sharePass">	
                                        </div>
                                      </div>
                                    </form>
                                </div>
-->
                                
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>
			
<!--            share结束-->
			<div class="display: hidden">
			<div class="hide" id="copyDiv"></div>
		</div>
	</div>
</div>


<!--<script src="https://cdn.tinymce.com/4/tinymce.min.js"></script>-->
<script src="public/js/tinymce/js/tinymce/tinymce.min.js"></script>

<script src="public/js/DND.js"></script>  
<script src="public/js/i18n/msg.en.js?t=b"></script>

<script src="public/js/app.min.js"></script>
    
<script src="public/js/async.js"></script>
<script src="public/data/alldata5.js"></script>
<script src="public/js/editor.js"></script>


<script>
    retrieveData();
    //require('nw.gui').Window.get().showDevTools() 
    require('nw.gui').Window.get().resizeTo(1600,900);
    require('nw.gui').Window.get().setResizable(true);  
</script>
    
<script>
    var player = videojs("myVideo",
    {
        controls: true,
        width: 477,
        height: 360,
        plugins: {
            record: {
                audio: true,
                video: true,
                maxLength: 20,
                debug: true
            }
        }
    });
    // error handling
    player.on('deviceError', function()
    {
        console.log('device error:', player.deviceErrorCode);
    });
    // user clicked the record button and started recording
    player.on('startRecord', function()
    {
        console.log('started recording!');
    });
    // user completed recording and stream is available
    player.on('finishRecord', function()
    {
        // the blob object contains the recorded data that
        // can be downloaded by the user, stored on server etc.
        console.log('finished recording: ', player.recordedData);
    });

    function downloadvideo(){
        saveAs(player.recordedData.video,"output.webm");
        saveAs(player.recordedData.audio,"output.wav");
    }
</script>

<script>

   // $(".gs-title").on("click","a",function(){
   //    alert("asdf");
   // });

  //  function bindEvent(func){
  //  		onClickFunc = func;
  //  	}

  //  function onClickFunc() {
		// bindEvent(function(){
		// 	alert("123");
		// });
  //  }

   function onClickFunc2() {
   		// location.href="#webpage";
   		$(this).attr("target", "viewframe");
   		var href = $(this).attr("href");
   		document.getElementById("address").value = href;
   		webaddress();
   		//$("#webBrowser").click();
   		$("#webicon").trigger("click");
   		//$(this).attr("href", "#webBrowser");
   }

   function hidecontent(){
   		document.getElementById("gscDoc").style.display="none";
   }

   function cse(){
   			$(".gs-title").unbind();
		   	$(".gs-title").on("click","a",onClickFunc2);

		   	$("#editor a").click(onClickFunc2);
//		   	$(".gsc-search-button").on("click",hidecontent());
        $(".gsc-input").change(hidecontent);
		   	// $("#webpage a").click(onClickFunc2);
		};

   $(document).ready(function(){
   		setInterval(cse,1000);
   		 
   });



  // $(".gs-title").on("click","a",function(){
  //   $(this).alert("123");
  // });

</script>

<script>
    $("#videodownload").on("click",downloadvideo())
</script>
<script src="public/js/recorder/configRecorder.js"> </script>
<script src="public/js/recorder/recorder.js"> </script>
<script src="public/js/recorder/recorderWorker.js"> </script>
<script src="public/js/plugins/main.min.js"></script>


<script src="public/js/media.js"></script>
<!--    Media Window (must be put after the initPage()-->
    
<!--    tracking-->
<script src="public/js/tracking/Blob.js" ></script>
<script src="public/js/tracking/FileSaver.js" ></script>
<script src="public/js/tracking/tracking.js" ></script>

</body>
</html>

